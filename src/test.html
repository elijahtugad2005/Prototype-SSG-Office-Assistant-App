<!DOCTYPE html>
<html>
<head>
    <title>Base64 Image Demo</title>
</head>
<body>
    <input type="file" id="imageInput" accept="image/*">
    <div id="imageContainer"></div>

    <script>
        document.getElementById('imageInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                convertAndDisplayImage(file);
            }
        });

        function convertAndDisplayImage(file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                // This is the complete Data URL
                const dataUrl = e.target.result;
                
                // Extract just the Base64 part
                const base64Data = dataUrl.split(',')[1];
                
                console.log("File type:", file.type);
                console.log("File size:", file.size, "bytes");
                console.log("Base64 length:", base64Data.length, "characters");
                console.log("Base64 data (first 100 chars):", base64Data.substring(0, 100000) + "...");
                
                // Display the original image
                displayImage(dataUrl, "Original via Data URL");
                
                // Reconstruct and display from Base64
                const reconstructedUrl = `data:${file.type};base64,${base64Data}`;
                displayImage(reconstructedUrl, "Reconstructed from Base64");
            };
            
            reader.readAsDataURL(file);
        }

        function displayImage(src, label) {
            const container = document.getElementById('imageContainer');
            const div = document.createElement('div');
            div.innerHTML = `<h3>${label}</h3><img src="${src}" style="max-width: 300px; border: 1px solid #ccc;">`;
            container.appendChild(div);
        }
    </script>
</body>
</html>
